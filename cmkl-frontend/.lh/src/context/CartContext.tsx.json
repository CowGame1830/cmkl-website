{
    "sourceFile": "src/context/CartContext.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1764386662679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1764386662679,
            "name": "Commit-0",
            "content": "import React, { createContext, useContext, useReducer } from 'react';\r\nimport type { ReactNode } from 'react';\r\nimport type { Product } from '../data/types';\r\n\r\n// Shopping Cart Context\r\ninterface CartItem {\r\n  product: Product;\r\n  quantity: number;\r\n}\r\n\r\ninterface CartState {\r\n  items: CartItem[];\r\n  total: number;\r\n}\r\n\r\ntype CartAction = \r\n  | { type: 'ADD_ITEM'; payload: Product }\r\n  | { type: 'REMOVE_ITEM'; payload: number }\r\n  | { type: 'UPDATE_QUANTITY'; payload: { id: number; quantity: number } }\r\n  | { type: 'CLEAR_CART' };\r\n\r\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\r\n  switch (action.type) {\r\n    case 'ADD_ITEM': {\r\n      const existingItem = state.items.find(item => item.product.id === action.payload.id);\r\n      \r\n      if (existingItem) {\r\n        const updatedItems = state.items.map(item =>\r\n          item.product.id === action.payload.id\r\n            ? { ...item, quantity: item.quantity + 1 }\r\n            : item\r\n        );\r\n        return {\r\n          items: updatedItems,\r\n          total: updatedItems.reduce((sum, item) => sum + item.product.price * item.quantity, 0)\r\n        };\r\n      } else {\r\n        const newItems = [...state.items, { product: action.payload, quantity: 1 }];\r\n        return {\r\n          items: newItems,\r\n          total: newItems.reduce((sum, item) => sum + item.product.price * item.quantity, 0)\r\n        };\r\n      }\r\n    }\r\n    case 'REMOVE_ITEM': {\r\n      const filteredItems = state.items.filter(item => item.product.id !== action.payload);\r\n      return {\r\n        items: filteredItems,\r\n        total: filteredItems.reduce((sum, item) => sum + item.product.price * item.quantity, 0)\r\n      };\r\n    }\r\n    case 'UPDATE_QUANTITY': {\r\n      const updatedItems = state.items.map(item =>\r\n        item.product.id === action.payload.id\r\n          ? { ...item, quantity: action.payload.quantity }\r\n          : item\r\n      ).filter(item => item.quantity > 0);\r\n      \r\n      return {\r\n        items: updatedItems,\r\n        total: updatedItems.reduce((sum, item) => sum + item.product.price * item.quantity, 0)\r\n      };\r\n    }\r\n    case 'CLEAR_CART':\r\n      return { items: [], total: 0 };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ninterface CartContextType {\r\n  cart: CartState;\r\n  addItem: (product: Product) => void;\r\n  removeItem: (productId: number) => void;\r\n  updateQuantity: (productId: number, quantity: number) => void;\r\n  clearCart: () => void;\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart must be used within a CartProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface CartProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\r\n  const [cart, dispatch] = useReducer(cartReducer, { items: [], total: 0 });\r\n\r\n  const addItem = (product: Product) => {\r\n    dispatch({ type: 'ADD_ITEM', payload: product });\r\n  };\r\n\r\n  const removeItem = (productId: number) => {\r\n    dispatch({ type: 'REMOVE_ITEM', payload: productId });\r\n  };\r\n\r\n  const updateQuantity = (productId: number, quantity: number) => {\r\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { id: productId, quantity } });\r\n  };\r\n\r\n  const clearCart = () => {\r\n    dispatch({ type: 'CLEAR_CART' });\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cart, addItem, removeItem, updateQuantity, clearCart }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"
        }
    ]
}